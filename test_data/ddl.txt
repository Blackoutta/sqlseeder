create table account
(
    id         bigserial
        primary key,
    created_at timestamp(6) with time zone,
    created_by varchar(255),
    deleted_at timestamp(6) with time zone,
    updated_at timestamp(6) with time zone,
    updated_by varchar(255),
    code       varchar(255),
    name       varchar(255),
    type       varchar(255)
        constraint account_type_check
            check ((type)::text = ANY ((ARRAY ['INCOME'::character varying, 'OUTGO'::character varying])::text[]))
);

comment on table account is '科目';

comment on column account.created_at is '实体操作相关信息';

comment on column account.created_by is '实体操作相关信息';

comment on column account.deleted_at is '实体操作相关信息';

comment on column account.updated_at is '实体操作相关信息';

comment on column account.updated_by is '实体操作相关信息';

comment on column account.code is '科目代码';

comment on column account.name is '科目名称';

comment on column account.type is '科目类型';

alter table account
    owner to postgres;

create table attachment
(
    id         bigserial
        primary key,
    created_at timestamp(6) with time zone,
    created_by varchar(255),
    deleted_at timestamp(6) with time zone,
    updated_at timestamp(6) with time zone,
    updated_by varchar(255),
    attach_no  varchar(255),
    base64     text
);

comment on column attachment.created_at is '实体操作相关信息';

comment on column attachment.created_by is '实体操作相关信息';

comment on column attachment.deleted_at is '实体操作相关信息';

comment on column attachment.updated_at is '实体操作相关信息';

comment on column attachment.updated_by is '实体操作相关信息';

alter table attachment
    owner to postgres;

create table bank_head
(
    id   bigserial
        primary key,
    code varchar(255),
    name varchar(255)
);

comment on table bank_head is '总行|银行大类';

comment on column bank_head.code is '代码';

comment on column bank_head.name is '名称';

alter table bank_head
    owner to postgres;

create table bank_branch
(
    id      bigserial
        primary key,
    enabled boolean,
    name    varchar(255),
    head_id bigint
        constraint "FKkcvd91xpwoq75mmn5a91307hk"
            references bank_head
);

comment on table bank_branch is '分行|银行渠道';

comment on column bank_branch.enabled is '有效';

comment on column bank_branch.name is '名称';

comment on column bank_branch.head_id is '所属总行/大类';

alter table bank_branch
    owner to postgres;

create table company_base
(
    id             bigserial
        primary key,
    extension      jsonb,
    alias          varchar(255),
    attribute      varchar(255),
    business_group varchar(255),
    code           varchar(255),
    consolidated   boolean,
    domestic       boolean,
    name           varchar(255)
);

comment on table company_base is '公司';

comment on column company_base.alias is '公司简称';

comment on column company_base.attribute is '公司属性';

comment on column company_base.business_group is '业务集团';

comment on column company_base.code is '公司代码';

comment on column company_base.consolidated is '是否并表';

comment on column company_base.domestic is '是否境内';

comment on column company_base.name is '公司名称';

alter table company_base
    owner to postgres;

create table company
(
    id                 bigserial
        primary key,
    created_at         timestamp(6) with time zone,
    created_by         varchar(255),
    deleted_at         timestamp(6) with time zone,
    updated_at         timestamp(6) with time zone,
    updated_by         varchar(255),
    delivery_prep_days integer,
    delivery_type      varchar(255)
        constraint company_delivery_type_check
            check ((delivery_type)::text = ANY ((ARRAY ['FULL'::character varying, 'DIF'::character varying])::text[])),
    notify_email_list  jsonb,
    passed_email_list  jsonb,
    supervised         boolean,
    company_base_id    bigint
        constraint uk_puh39gnnuikr86wh27lqc8rua
            unique
        constraint "FKqypbait7jhoo2j1c4fnf04cmi"
            references company_base
);

comment on table company is '公司套保配置';

comment on column company.created_at is '实体操作相关信息';

comment on column company.created_by is '实体操作相关信息';

comment on column company.deleted_at is '实体操作相关信息';

comment on column company.updated_at is '实体操作相关信息';

comment on column company.updated_by is '实体操作相关信息';

comment on column company.delivery_prep_days is '提前x交易日提醒交割';

comment on column company.delivery_type is '默认交割方式';

comment on column company.notify_email_list is '到期提醒邮箱';

comment on column company.passed_email_list is '套保方案通过邮箱';

comment on column company.supervised is '强管控';

comment on column company.company_base_id is '关联公司';

alter table company
    owner to postgres;

create table company_account
(
    id         bigserial
        primary key,
    created_at timestamp(6) with time zone,
    created_by varchar(255),
    deleted_at timestamp(6) with time zone,
    updated_at timestamp(6) with time zone,
    updated_by varchar(255),
    enabled    boolean,
    account_id bigint
        constraint "FK3ect1oadg21w90p5br3t89r49"
            references account,
    company_id bigint
        constraint "FK5htbulymiuwhwgs3o2srye5yg"
            references company
);

comment on table company_account is '公司套保科目';

comment on column company_account.created_at is '实体操作相关信息';

comment on column company_account.created_by is '实体操作相关信息';

comment on column company_account.deleted_at is '实体操作相关信息';

comment on column company_account.updated_at is '实体操作相关信息';

comment on column company_account.updated_by is '实体操作相关信息';

comment on column company_account.enabled is '启用';

comment on column company_account.account_id is '关联科目';

comment on column company_account.company_id is '关联公司套保';

alter table company_account
    owner to postgres;

create table currency
(
    id   bigserial
        primary key,
    code varchar(255),
    name varchar(255)
);

comment on table currency is '货币';

comment on column currency.code is '代码';

comment on column currency.name is '名称';

alter table currency
    owner to postgres;

create table bank_account
(
    id              bigserial
        primary key,
    account_no      varchar(255),
    name            varchar(255),
    branch_id       bigint
        constraint "FKpyx8j0g7518kk5jtpk9n4jkgu"
            references bank_branch,
    company_base_id bigint
        constraint "FKk13mo8c4dqrgysy13urqagyiu"
            references company_base,
    currency_id     bigint
        constraint "FKks4n2mw4ksdvfcottkwhu9y2d"
            references currency
);

comment on table bank_account is '银行账号';

comment on column bank_account.account_no is '账号';

comment on column bank_account.name is '名称';

comment on column bank_account.branch_id is '所属支行/渠道';

comment on column bank_account.company_base_id is '所属公司';

comment on column bank_account.currency_id is '币种';

alter table bank_account
    owner to postgres;

create table company_currency
(
    id                     bigserial
        primary key,
    created_at             timestamp(6) with time zone,
    created_by             varchar(255),
    deleted_at             timestamp(6) with time zone,
    updated_at             timestamp(6) with time zone,
    updated_by             varchar(255),
    fut_mon_avg_bias_limit numeric(38, 2),
    mom_bias_limit         numeric(38, 2),
    mon_avg_bias_limit     numeric(38, 2),
    payment_period         integer,
    comp_currency_id       bigint
        constraint "FKt6ajykrwbetyof7i00e1ev793"
            references currency,
    company_id             bigint
        constraint "FKmnxn0sik05tdmxvhj332ef42j"
            references company
);

comment on table company_currency is '公司套保币种配置';

comment on column company_currency.created_at is '实体操作相关信息';

comment on column company_currency.created_by is '实体操作相关信息';

comment on column company_currency.deleted_at is '实体操作相关信息';

comment on column company_currency.updated_at is '实体操作相关信息';

comment on column company_currency.updated_by is '实体操作相关信息';

comment on column company_currency.fut_mon_avg_bias_limit is '未来月均敞口允许偏离度';

comment on column company_currency.mom_bias_limit is '相较上月敞口允许偏离度';

comment on column company_currency.mon_avg_bias_limit is '相较上月敞口允许偏离度';

comment on column company_currency.payment_period is '账期月数';

comment on column company_currency.comp_currency_id is '币种';

comment on column company_currency.company_id is '关联公司套保设置';

alter table company_currency
    owner to postgres;

create table entity_extension_schema
(
    id     bigserial
        primary key,
    entity varchar(255),
    key    varchar(255),
    label  varchar(255)
);

comment on table entity_extension_schema is '实体扩展字段的结构';

comment on column entity_extension_schema.entity is '实体名';

comment on column entity_extension_schema.key is '字段的json-key';

comment on column entity_extension_schema.label is '字段的展示列名';

alter table entity_extension_schema
    owner to postgres;

create table exposure_record
(
    id            bigserial
        primary key,
    created_at    timestamp(6) with time zone,
    created_by    varchar(255),
    deleted_at    timestamp(6) with time zone,
    updated_at    timestamp(6) with time zone,
    updated_by    varchar(255),
    key           varchar(255),
    reject_reason varchar(255),
    status        varchar(255)
        constraint exposure_record_status_check
            check ((status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'SUBMITTED'::character varying, 'APPROVING'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying, 'CANCELED'::character varying, 'DELETED'::character varying, 'FINISH'::character varying])::text[])),
    code          varchar(255),
    year_month    integer
);

comment on table exposure_record is '敞口填报|包含多个公司币种的批量填报';

comment on column exposure_record.created_at is '实体操作相关信息';

comment on column exposure_record.created_by is '实体操作相关信息';

comment on column exposure_record.deleted_at is '实体操作相关信息';

comment on column exposure_record.updated_at is '实体操作相关信息';

comment on column exposure_record.updated_by is '实体操作相关信息';

comment on column exposure_record.reject_reason is '拒绝理由';

comment on column exposure_record.status is '审批状态';

comment on column exposure_record.code is '单据编号';

comment on column exposure_record.year_month is '所属月份';

alter table exposure_record
    owner to postgres;

create table exposure_record_entry
(
    id                     bigserial
        primary key,
    created_at             timestamp(6) with time zone,
    created_by             varchar(255),
    deleted_at             timestamp(6) with time zone,
    updated_at             timestamp(6) with time zone,
    updated_by             varchar(255),
    bias_comment           varchar(255),
    comment                varchar(255),
    company_id             bigint,
    currency_id            bigint,
    fut_mon_avg_bias_limit numeric(38, 2),
    mom_bias_limit         numeric(38, 2),
    mon_avg_bias_limit     numeric(38, 2),
    payment_period         integer,
    payable_mi             numeric(38, 2),
    receivable_mi          numeric(38, 2),
    volume_actual          integer,
    volume_predictions     jsonb,
    record_id              bigint
        constraint "FKfglrtdkp7xenknibbpsii99tv"
            references exposure_record
);

comment on table exposure_record_entry is '敞口填报条目|按照公司币种分别填写的条目';

comment on column exposure_record_entry.created_at is '实体操作相关信息';

comment on column exposure_record_entry.created_by is '实体操作相关信息';

comment on column exposure_record_entry.deleted_at is '实体操作相关信息';

comment on column exposure_record_entry.updated_at is '实体操作相关信息';

comment on column exposure_record_entry.updated_by is '实体操作相关信息';

comment on column exposure_record_entry.bias_comment is '偏差说明';

comment on column exposure_record_entry.comment is '补充说明';

comment on column exposure_record_entry.company_id is '所属公司套保币种快照';

comment on column exposure_record_entry.currency_id is '所属公司套保币种快照';

comment on column exposure_record_entry.fut_mon_avg_bias_limit is '所属公司套保币种快照';

comment on column exposure_record_entry.mom_bias_limit is '所属公司套保币种快照';

comment on column exposure_record_entry.mon_avg_bias_limit is '所属公司套保币种快照';

comment on column exposure_record_entry.payment_period is '所属公司套保币种快照';

comment on column exposure_record_entry.payable_mi is '当前应付（百万）';

comment on column exposure_record_entry.receivable_mi is '当前应收（百万）';

comment on column exposure_record_entry.volume_actual is '上月实际业务量';

comment on column exposure_record_entry.volume_predictions is '未来业务量预测';

comment on column exposure_record_entry.record_id is '所属填报';

alter table exposure_record_entry
    owner to postgres;

create table exposure_record_detail
(
    id                 bigserial
        primary key,
    created_at         timestamp(6) with time zone,
    created_by         varchar(255),
    deleted_at         timestamp(6) with time zone,
    updated_at         timestamp(6) with time zone,
    updated_by         varchar(255),
    amount_actual      numeric(38, 2),
    amount_predictions jsonb,
    company_account_id bigint
        constraint "FK626040ghhjo05bdmggqgvpn6j"
            references company_account,
    entry_id           bigint
        constraint "FK8r2yva12nx319w232px4ouxdu"
            references exposure_record_entry
);

comment on table exposure_record_detail is '敞口填报明细|按公司套保科目填报的明细数据';

comment on column exposure_record_detail.created_at is '实体操作相关信息';

comment on column exposure_record_detail.created_by is '实体操作相关信息';

comment on column exposure_record_detail.deleted_at is '实体操作相关信息';

comment on column exposure_record_detail.updated_at is '实体操作相关信息';

comment on column exposure_record_detail.updated_by is '实体操作相关信息';

comment on column exposure_record_detail.amount_actual is '上月实际金额（百万）';

comment on column exposure_record_detail.amount_predictions is '未来金额预测（百万）';

comment on column exposure_record_detail.company_account_id is '所属公司套保科目';

comment on column exposure_record_detail.entry_id is '所属条目';

alter table exposure_record_detail
    owner to postgres;

create table exposure_record_permission
(
    id         bigserial
        primary key,
    created_at timestamp(6) with time zone,
    created_by varchar(255),
    deleted_at timestamp(6) with time zone,
    updated_at timestamp(6) with time zone,
    updated_by varchar(255),
    company_id bigint,
    user_id    bigint
);

comment on table exposure_record_permission is '敞口填报权限';

comment on column exposure_record_permission.created_at is '实体操作相关信息';

comment on column exposure_record_permission.created_by is '实体操作相关信息';

comment on column exposure_record_permission.deleted_at is '实体操作相关信息';

comment on column exposure_record_permission.updated_at is '实体操作相关信息';

comment on column exposure_record_permission.updated_by is '实体操作相关信息';

comment on column exposure_record_permission.company_id is '关联公司套保';

comment on column exposure_record_permission.user_id is '关联用户';

alter table exposure_record_permission
    owner to postgres;

create table general_user
(
    id                bigserial
        primary key,
    extension         jsonb,
    employee_number   varchar(255),
    organization_name varchar(255),
    user_id           varchar(255)
);

comment on table general_user is '用户中心用户';

comment on column general_user.employee_number is '工号';

comment on column general_user.organization_name is '组织名称';

comment on column general_user.user_id is '用户中心的用户ID';

alter table general_user
    owner to postgres;

create table company_channel_config
(
    id                   bigserial
        primary key,
    created_at           timestamp(6) with time zone,
    created_by           varchar(255),
    deleted_at           timestamp(6) with time zone,
    updated_at           timestamp(6) with time zone,
    updated_by           varchar(255),
    company_id           bigint
        constraint "FKm9kn31bwgsux81enaiikh5ufu"
            references company,
    default_trader_id    bigint
        constraint "FK9my1kkc0bklj5551p2s6mnyhr"
            references general_user,
    exposure_currency_id bigint
        constraint "FK406lw0c4xbpd5htncu9pdlqya"
            references currency,
    hedge_currency_id    bigint
        constraint "FK6fo5ms24s1y9jg36li5r6dmeo"
            references currency
);

comment on table company_channel_config is '公司交易通道配置';

comment on column company_channel_config.created_at is '实体操作相关信息';

comment on column company_channel_config.created_by is '实体操作相关信息';

comment on column company_channel_config.deleted_at is '实体操作相关信息';

comment on column company_channel_config.updated_at is '实体操作相关信息';

comment on column company_channel_config.updated_by is '实体操作相关信息';

comment on column company_channel_config.company_id is '公司';

comment on column company_channel_config.default_trader_id is '默认交易员';

comment on column company_channel_config.exposure_currency_id is '敞口币种';

comment on column company_channel_config.hedge_currency_id is '对手币种';

alter table company_channel_config
    owner to postgres;

create table company_channel_config_general_user
(
    company_channel_config_id bigint not null
        constraint "FKlkk888u507rxx74qxrq9drk0a"
            references company_channel_config,
    trader_list_id            bigint not null
        constraint "FKsni3kf7mucrnd7oivpus0n99r"
            references general_user
);

alter table company_channel_config_general_user
    owner to postgres;

create table hedge_group
(
    id                bigserial
        primary key,
    created_at        timestamp(6) with time zone,
    created_by        varchar(255),
    deleted_at        timestamp(6) with time zone,
    updated_at        timestamp(6) with time zone,
    updated_by        varchar(255),
    key               varchar(255),
    reject_reason     varchar(255),
    status            varchar(255)
        constraint hedge_group_status_check
            check ((status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'SUBMITTED'::character varying, 'APPROVING'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying, 'CANCELED'::character varying, 'DELETED'::character varying, 'FINISH'::character varying])::text[])),
    code              varchar(255),
    comment           varchar(255),
    name              varchar(255),
    delegate_id       bigint
        constraint "FKjfk9ujj1jy534gihhpekd7lf5"
            references company,
    group_currency_id bigint
        constraint "FKrv0mpsjwubk601gavqjfl2jff"
            references currency,
    master_id         bigint
        constraint "FK3lyuh8bvtkc6x52kfb4ykib7r"
            references company_currency
);

comment on table hedge_group is '套保组';

comment on column hedge_group.created_at is '实体操作相关信息';

comment on column hedge_group.created_by is '实体操作相关信息';

comment on column hedge_group.deleted_at is '实体操作相关信息';

comment on column hedge_group.updated_at is '实体操作相关信息';

comment on column hedge_group.updated_by is '实体操作相关信息';

comment on column hedge_group.reject_reason is '拒绝理由';

comment on column hedge_group.status is '审批状态';

comment on column hedge_group.code is '套保组代码';

comment on column hedge_group.comment is '备注';

comment on column hedge_group.name is '套保组名称';

comment on column hedge_group.delegate_id is '代套保公司';

comment on column hedge_group.group_currency_id is '敞口币种';

comment on column hedge_group.master_id is '套保主体';

alter table hedge_group
    owner to postgres;

create table hedge_master
(
    id                  bigserial
        primary key,
    created_at          timestamp(6) with time zone,
    created_by          varchar(255),
    deleted_at          timestamp(6) with time zone,
    updated_at          timestamp(6) with time zone,
    updated_by          varchar(255),
    company_currency_id bigint
        constraint "FKbuvnjv3pd52g000misblosqw6"
            references company_currency,
    group_id            bigint
        constraint uk_oe7t6m36va0l9un5oj6k2pai1
            unique
        constraint "FKnpqf09k7l88su58gfh4lixwsg"
            references hedge_group
);

comment on table hedge_master is '套保主体';

comment on column hedge_master.created_at is '实体操作相关信息';

comment on column hedge_master.created_by is '实体操作相关信息';

comment on column hedge_master.deleted_at is '实体操作相关信息';

comment on column hedge_master.updated_at is '实体操作相关信息';

comment on column hedge_master.updated_by is '实体操作相关信息';

comment on column hedge_master.company_currency_id is '关联公司币种';

comment on column hedge_master.group_id is '关联套保组';

alter table hedge_master
    owner to postgres;

create table hedge_member
(
    id                  bigserial
        primary key,
    created_at          timestamp(6) with time zone,
    created_by          varchar(255),
    deleted_at          timestamp(6) with time zone,
    updated_at          timestamp(6) with time zone,
    updated_by          varchar(255),
    company_currency_id bigint
        constraint "FK3jofko6usc4hflxbuqh3648ga"
            references company_currency,
    group_id            bigint
        constraint "FKsd2vocjowe9qeahnx1wpf0fo1"
            references hedge_group
);

comment on table hedge_member is '套保成员';

comment on column hedge_member.created_at is '实体操作相关信息';

comment on column hedge_member.created_by is '实体操作相关信息';

comment on column hedge_member.deleted_at is '实体操作相关信息';

comment on column hedge_member.updated_at is '实体操作相关信息';

comment on column hedge_member.updated_by is '实体操作相关信息';

comment on column hedge_member.company_currency_id is '关联公司币种';

comment on column hedge_member.group_id is '关联套保组';

alter table hedge_member
    owner to postgres;

create table hedge_plan
(
    id              bigserial
        primary key,
    created_at      timestamp(6) with time zone,
    created_by      varchar(255),
    deleted_at      timestamp(6) with time zone,
    updated_at      timestamp(6) with time zone,
    updated_by      varchar(255),
    approval_status varchar(255)
        constraint hedge_plan_approval_status_check
            check ((approval_status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'SUBMITTED'::character varying, 'APPROVING'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying, 'CANCELED'::character varying, 'DELETED'::character varying, 'FINISH'::character varying])::text[])),
    plan_no         varchar(255),
    year_month      integer
);

comment on table hedge_plan is '套保方案';

comment on column hedge_plan.created_at is '实体操作相关信息';

comment on column hedge_plan.created_by is '实体操作相关信息';

comment on column hedge_plan.deleted_at is '实体操作相关信息';

comment on column hedge_plan.updated_at is '实体操作相关信息';

comment on column hedge_plan.updated_by is '实体操作相关信息';

comment on column hedge_plan.approval_status is '状态';

comment on column hedge_plan.plan_no is '套保方案编号';

comment on column hedge_plan.year_month is '方案月份';

alter table hedge_plan
    owner to postgres;

create table hedge_plan_entry
(
    id                   bigserial
        primary key,
    created_at           timestamp(6) with time zone,
    created_by           varchar(255),
    deleted_at           timestamp(6) with time zone,
    updated_at           timestamp(6) with time zone,
    updated_by           varchar(255),
    month_term           integer,
    remark               varchar(255),
    company_currency_id  bigint
        constraint "FK86yci8b9mbbnfb4blcw8586bh"
            references company_currency,
    exposure_currency_id bigint
        constraint "FKemvxfur9umvgg9we6f0ewk3bu"
            references currency,
    hedge_currency_id    bigint
        constraint "FKjhh9rechlrdsd4c41q22l4il2"
            references currency,
    hedge_group_id       bigint
        constraint "FKe4kty7hx51ho8hhj6jg59w6q4"
            references hedge_group,
    plan_id              bigint
        constraint "FKcoxcy79ohpsxd7edbknenpr25"
            references hedge_plan
);

comment on table hedge_plan_entry is '套保方案条目';

comment on column hedge_plan_entry.created_at is '实体操作相关信息';

comment on column hedge_plan_entry.created_by is '实体操作相关信息';

comment on column hedge_plan_entry.deleted_at is '实体操作相关信息';

comment on column hedge_plan_entry.updated_at is '实体操作相关信息';

comment on column hedge_plan_entry.updated_by is '实体操作相关信息';

comment on column hedge_plan_entry.month_term is '月份期限';

comment on column hedge_plan_entry.remark is '备注';

comment on column hedge_plan_entry.company_currency_id is '对应公司币种';

comment on column hedge_plan_entry.exposure_currency_id is '敞口币种';

comment on column hedge_plan_entry.hedge_currency_id is '对手币种';

comment on column hedge_plan_entry.hedge_group_id is '套保组';

comment on column hedge_plan_entry.plan_id is '所属方案';

alter table hedge_plan_entry
    owner to postgres;

create table hedge_plan_detail
(
    id         bigserial
        primary key,
    created_at timestamp(6) with time zone,
    created_by varchar(255),
    deleted_at timestamp(6) with time zone,
    updated_at timestamp(6) with time zone,
    updated_by varchar(255),
    amount     numeric(38, 2),
    year_month integer,
    entry_id   bigint
        constraint "FK4k9jwb2b7iedw5ync4rp6vn99"
            references hedge_plan_entry,
    master_id  bigint
        constraint "FKokai9lmyrtq9asr06yaes8cyg"
            references company
);

comment on table hedge_plan_detail is '套保方案明细';

comment on column hedge_plan_detail.created_at is '实体操作相关信息';

comment on column hedge_plan_detail.created_by is '实体操作相关信息';

comment on column hedge_plan_detail.deleted_at is '实体操作相关信息';

comment on column hedge_plan_detail.updated_at is '实体操作相关信息';

comment on column hedge_plan_detail.updated_by is '实体操作相关信息';

comment on column hedge_plan_detail.amount is '金额(百万)';

comment on column hedge_plan_detail.year_month is '对应年月';

comment on column hedge_plan_detail.entry_id is '所属方案';

comment on column hedge_plan_detail.master_id is '执行主体（套保组）';

alter table hedge_plan_detail
    owner to postgres;

create table hedge_plan_attachment
(
    hedge_plan_id      bigint not null
        constraint "FKjqqgvot86cbsapwmtxjm5adt4"
            references hedge_plan,
    attachment_list_id bigint not null
        constraint uk_3b649mpfe4uu1numom6vpvrxb
            unique
        constraint "FK9f33tja2qpo9tm97axr43kp6j"
            references attachment
);

alter table hedge_plan_attachment
    owner to postgres;

create table hedge_ratio_record_model
(
    id            bigserial
        primary key,
    created_at    timestamp(6) with time zone,
    created_by    varchar(255),
    deleted_at    timestamp(6) with time zone,
    updated_at    timestamp(6) with time zone,
    updated_by    varchar(255),
    key           varchar(255),
    reject_reason varchar(255),
    status        varchar(255)
        constraint hedge_ratio_record_model_status_check
            check ((status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'SUBMITTED'::character varying, 'APPROVING'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying, 'CANCELED'::character varying, 'DELETED'::character varying, 'FINISH'::character varying])::text[])),
    adjust_reason varchar(255),
    content       text,
    valid_time    timestamp(6) with time zone
);

comment on table hedge_ratio_record_model is '套保比例报单';

comment on column hedge_ratio_record_model.created_at is '实体操作相关信息';

comment on column hedge_ratio_record_model.created_by is '实体操作相关信息';

comment on column hedge_ratio_record_model.deleted_at is '实体操作相关信息';

comment on column hedge_ratio_record_model.updated_at is '实体操作相关信息';

comment on column hedge_ratio_record_model.updated_by is '实体操作相关信息';

comment on column hedge_ratio_record_model.reject_reason is '拒绝理由';

comment on column hedge_ratio_record_model.status is '审批状态';

comment on column hedge_ratio_record_model.adjust_reason is '调整原因';

comment on column hedge_ratio_record_model.content is 'BPM文本';

comment on column hedge_ratio_record_model.valid_time is '生效时间';

alter table hedge_ratio_record_model
    owner to postgres;

create table hedge_ratio_entry_model
(
    id                     bigserial
        primary key,
    created_at             timestamp(6) with time zone,
    created_by             varchar(255),
    deleted_at             timestamp(6) with time zone,
    updated_at             timestamp(6) with time zone,
    updated_by             varchar(255),
    company_id             bigint,
    currency_id            bigint,
    fut_mon_avg_bias_limit numeric(38, 2),
    mom_bias_limit         numeric(38, 2),
    mon_avg_bias_limit     numeric(38, 2),
    payment_period         integer,
    month1                 integer,
    month10                integer,
    month11                integer,
    month12                integer,
    month2                 integer,
    month3                 integer,
    month4                 integer,
    month5                 integer,
    month6                 integer,
    month7                 integer,
    month8                 integer,
    month9                 integer,
    record_model_id        bigint
        constraint "FK2qaea1rf1o5j2u03xao1hm8an"
            references hedge_ratio_record_model
);

comment on table hedge_ratio_entry_model is '套保比例模型';

comment on column hedge_ratio_entry_model.created_at is '实体操作相关信息';

comment on column hedge_ratio_entry_model.created_by is '实体操作相关信息';

comment on column hedge_ratio_entry_model.deleted_at is '实体操作相关信息';

comment on column hedge_ratio_entry_model.updated_at is '实体操作相关信息';

comment on column hedge_ratio_entry_model.updated_by is '实体操作相关信息';

comment on column hedge_ratio_entry_model.company_id is '公司';

comment on column hedge_ratio_entry_model.currency_id is '币种';

comment on column hedge_ratio_entry_model.fut_mon_avg_bias_limit is '未来偏离度';

comment on column hedge_ratio_entry_model.mom_bias_limit is '上期偏离度';

comment on column hedge_ratio_entry_model.mon_avg_bias_limit is '历史偏离度';

comment on column hedge_ratio_entry_model.payment_period is '账期月数';

comment on column hedge_ratio_entry_model.record_model_id is '所属填报';

alter table hedge_ratio_entry_model
    owner to postgres;

create table hedge_ratio_record_model_attachment
(
    hedge_ratio_record_model_id bigint not null
        constraint "FKo3mpmrone5iaggl3n9drimpur"
            references hedge_ratio_record_model,
    attachment_list_id          bigint not null
        constraint uk_1e0gr08dfbh7qp8g57r09a2yh
            unique
        constraint "FKnwywfvogba8wb6x0gne1fc50r"
            references attachment
);

alter table hedge_ratio_record_model_attachment
    owner to postgres;

create table hedge_ratio_record_model_hedge_ratio_entry_model
(
    hedge_ratio_record_model_id bigint not null
        constraint "FKirrefbootwrmog9fomj8c3r8j"
            references hedge_ratio_record_model,
    entry_model_list_id         bigint not null
        constraint uk_ehgj10v10xr81kgl47iqncb43
            unique
        constraint "FKr88nkky06i0jg0fp0vmpr2gr1"
            references hedge_ratio_entry_model
);

alter table hedge_ratio_record_model_hedge_ratio_entry_model
    owner to postgres;

create table hedge_virtual_plan_detail
(
    id                   bigserial
        primary key,
    created_at           timestamp(6) with time zone,
    created_by           varchar(255),
    deleted_at           timestamp(6) with time zone,
    updated_at           timestamp(6) with time zone,
    updated_by           varchar(255),
    coefficient          numeric(38, 2),
    hedge_plan_detail_id bigint
        constraint "FK4weasehnl9n31ebd0hqwxdks2"
            references hedge_plan_detail
);

comment on table hedge_virtual_plan_detail is '套保虚拟方案明细';

comment on column hedge_virtual_plan_detail.created_at is '实体操作相关信息';

comment on column hedge_virtual_plan_detail.created_by is '实体操作相关信息';

comment on column hedge_virtual_plan_detail.deleted_at is '实体操作相关信息';

comment on column hedge_virtual_plan_detail.updated_at is '实体操作相关信息';

comment on column hedge_virtual_plan_detail.updated_by is '实体操作相关信息';

comment on column hedge_virtual_plan_detail.coefficient is '分摊系数';

comment on column hedge_virtual_plan_detail.hedge_plan_detail_id is '套保方案明细';

alter table hedge_virtual_plan_detail
    owner to postgres;

create table hedge_virtual_plan_entry
(
    id                  bigserial
        primary key,
    created_at          timestamp(6) with time zone,
    created_by          varchar(255),
    deleted_at          timestamp(6) with time zone,
    updated_at          timestamp(6) with time zone,
    updated_by          varchar(255),
    company_currency_id bigint
        constraint "FKaxh2aw8hcfw7upgc5vtmufnan"
            references company_currency,
    hedge_plan_entry_id bigint
        constraint "FK8t8vv5gdh46qu367u6hlkyhxe"
            references hedge_plan_entry
);

comment on table hedge_virtual_plan_entry is '套保方案虚拟记账';

comment on column hedge_virtual_plan_entry.created_at is '实体操作相关信息';

comment on column hedge_virtual_plan_entry.created_by is '实体操作相关信息';

comment on column hedge_virtual_plan_entry.deleted_at is '实体操作相关信息';

comment on column hedge_virtual_plan_entry.updated_at is '实体操作相关信息';

comment on column hedge_virtual_plan_entry.updated_by is '实体操作相关信息';

comment on column hedge_virtual_plan_entry.company_currency_id is '成员公司币种';

comment on column hedge_virtual_plan_entry.hedge_plan_entry_id is '套保方案条目';

alter table hedge_virtual_plan_entry
    owner to postgres;

create table hedge_virtual_plan_entry_hedge_virtual_plan_detail
(
    hedge_virtual_plan_entry_id bigint not null
        constraint "FK1g827fpxqucmnblwa9iag10k6"
            references hedge_virtual_plan_entry,
    details_id                  bigint not null
        constraint uk_h6qilvavgdjrnlpvt5kdw01d4
            unique
        constraint "FKkp56vm8dv96hnsmhg2jrcfmq9"
            references hedge_virtual_plan_detail
);

alter table hedge_virtual_plan_entry_hedge_virtual_plan_detail
    owner to postgres;

create table instruction
(
    id                  bigserial
        primary key,
    created_at          timestamp(6) with time zone,
    created_by          varchar(255),
    deleted_at          timestamp(6) with time zone,
    updated_at          timestamp(6) with time zone,
    updated_by          varchar(255),
    assign_status       varchar(255)
        constraint instruction_assign_status_check
            check ((assign_status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'PARTIAL_ASSIGNED'::character varying, 'ASSIGNED'::character varying])::text[])),
    assigned_volumem    numeric(38, 2) default 0,
    confirmed_volumem   numeric(38, 2),
    execute_status      varchar(255)
        constraint instruction_execute_status_check
            check ((execute_status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'EXECUTING'::character varying, 'TRADED'::character varying, 'FINISH'::character varying, 'TERMINATED'::character varying])::text[])),
    "from"              varchar(255)
        constraint instruction_from_check
            check (("from")::text = 'HEDGE_PLAN'::text),
    generated_time      timestamp(6) with time zone,
    instruction_no      varchar(255),
    trade_direction     varchar(255)
        constraint instruction_trade_direction_check
            check ((trade_direction)::text = ANY
                   ((ARRAY ['BUY'::character varying, 'SELL'::character varying])::text[])),
    traded_volumem      numeric(38, 2) default 0,
    trading_volumem     numeric(38, 2) default 0,
    hedge_plan_entry_id bigint
        constraint "FKoog6ib5vb47tfgjluuqxwcxmk"
            references hedge_plan_entry,
    master_id           bigint
        constraint "FK26lngauw7f4n6sy7jhtoxh675"
            references company
);

comment on table instruction is '套保指令';

comment on column instruction.created_at is '实体操作相关信息';

comment on column instruction.created_by is '实体操作相关信息';

comment on column instruction.deleted_at is '实体操作相关信息';

comment on column instruction.updated_at is '实体操作相关信息';

comment on column instruction.updated_by is '实体操作相关信息';

comment on column instruction.assign_status is '分配状态';

comment on column instruction.assigned_volumem is '已分配量（百万）';

comment on column instruction.confirmed_volumem is '已确认(交易)量（百万）';

comment on column instruction.execute_status is '执行状态';

comment on column instruction."from" is '指令生成方式';

comment on column instruction.generated_time is '指令生成时间';

comment on column instruction.instruction_no is '指令编号';

comment on column instruction.trade_direction is '交易方向';

comment on column instruction.traded_volumem is '已交易量（百万）';

comment on column instruction.trading_volumem is '交易量（百万）';

comment on column instruction.hedge_plan_entry_id is '套保方案条目';

comment on column instruction.master_id is '执行主体';

alter table instruction
    owner to postgres;

create table instruction_detail
(
    id                   bigserial
        primary key,
    created_at           timestamp(6) with time zone,
    created_by           varchar(255),
    deleted_at           timestamp(6) with time zone,
    updated_at           timestamp(6) with time zone,
    updated_by           varchar(255),
    assigned_volumem     numeric(38, 2) default 0,
    confirmed_volumem    numeric(38, 2) default 0,
    inquire_times        integer        default 0 not null,
    sequence_no          varchar(255),
    traded_volumem       numeric(38, 2) default 0,
    trading_times        integer        default 0 not null,
    trading_volumem      numeric(38, 2) default 0,
    hedge_plan_detail_id bigint
        constraint uk_tp3xo6jx7bjr1101rtske1p6w
            unique
        constraint "FK6uypn5q5yxro7xbygu4wdba5v"
            references hedge_plan_detail,
    instruction_id       bigint
        constraint "FK2vdo3nweip1amqwgd33pk1rxv"
            references instruction
);

comment on table instruction_detail is '套保指令明细';

comment on column instruction_detail.created_at is '实体操作相关信息';

comment on column instruction_detail.created_by is '实体操作相关信息';

comment on column instruction_detail.deleted_at is '实体操作相关信息';

comment on column instruction_detail.updated_at is '实体操作相关信息';

comment on column instruction_detail.updated_by is '实体操作相关信息';

comment on column instruction_detail.assigned_volumem is '已分配量（百万）';

comment on column instruction_detail.confirmed_volumem is '已确认(交易)量（百万）';

comment on column instruction_detail.inquire_times is '执行询价次数';

comment on column instruction_detail.sequence_no is '序号，自动按交割月份由近即远排列';

comment on column instruction_detail.traded_volumem is '已交易量（百万）';

comment on column instruction_detail.trading_times is '执行交易次数';

comment on column instruction_detail.trading_volumem is '交易量（百万）';

comment on column instruction_detail.hedge_plan_detail_id is '对应套保方案明细';

comment on column instruction_detail.instruction_id is '所属指令';

alter table instruction_detail
    owner to postgres;

create table test_approval_entity
(
    id            bigserial
        primary key,
    created_at    timestamp(6) with time zone,
    created_by    varchar(255),
    deleted_at    timestamp(6) with time zone,
    updated_at    timestamp(6) with time zone,
    updated_by    varchar(255),
    key           varchar(255),
    reject_reason varchar(255),
    status        varchar(255)
        constraint test_approval_entity_status_check
            check ((status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'SUBMITTED'::character varying, 'APPROVING'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying, 'CANCELED'::character varying, 'DELETED'::character varying, 'FINISH'::character varying])::text[])),
    value         varchar(255)
);

comment on column test_approval_entity.created_at is '实体操作相关信息';

comment on column test_approval_entity.created_by is '实体操作相关信息';

comment on column test_approval_entity.deleted_at is '实体操作相关信息';

comment on column test_approval_entity.updated_at is '实体操作相关信息';

comment on column test_approval_entity.updated_by is '实体操作相关信息';

comment on column test_approval_entity.reject_reason is '拒绝理由';

comment on column test_approval_entity.status is '审批状态';

alter table test_approval_entity
    owner to postgres;

create table trade_confirmation
(
    id             bigserial
        primary key,
    created_at     timestamp(6) with time zone,
    created_by     varchar(255),
    deleted_at     timestamp(6) with time zone,
    updated_at     timestamp(6) with time zone,
    updated_by     varchar(255),
    trade_order_id bigint
);

comment on table trade_confirmation is '成交确认';

comment on column trade_confirmation.created_at is '实体操作相关信息';

comment on column trade_confirmation.created_by is '实体操作相关信息';

comment on column trade_confirmation.deleted_at is '实体操作相关信息';

comment on column trade_confirmation.updated_at is '实体操作相关信息';

comment on column trade_confirmation.updated_by is '实体操作相关信息';

comment on column trade_confirmation.trade_order_id is '交易单';

alter table trade_confirmation
    owner to postgres;

create table trader_setting
(
    id                    bigserial
        primary key,
    created_at            timestamp(6) with time zone,
    created_by            varchar(255),
    deleted_at            timestamp(6) with time zone,
    updated_at            timestamp(6) with time zone,
    updated_by            varchar(255),
    bloom_berg_account    varchar(255),
    bloom_berg_pwd        varchar(255),
    cfm_receipt_email     varchar(255),
    cfm_receipt_email_pwd varchar(255),
    we_com_account        varchar(255),
    trader_id             bigint
        constraint uk_fw6hh1gn6ape3pmpll9ou9kwi
            unique
        constraint "FKf42siqcolnxeuixh4lfvpblf1"
            references general_user
);

comment on table trader_setting is '交易员个人设置';

comment on column trader_setting.created_at is '实体操作相关信息';

comment on column trader_setting.created_by is '实体操作相关信息';

comment on column trader_setting.deleted_at is '实体操作相关信息';

comment on column trader_setting.updated_at is '实体操作相关信息';

comment on column trader_setting.updated_by is '实体操作相关信息';

comment on column trader_setting.bloom_berg_account is '彭博账号';

comment on column trader_setting.bloom_berg_pwd is '彭博密码';

comment on column trader_setting.cfm_receipt_email is '成交单收取邮箱';

comment on column trader_setting.cfm_receipt_email_pwd is '成交单收取邮箱密码';

comment on column trader_setting.we_com_account is '企业微信账号';

comment on column trader_setting.trader_id is '交易员';

alter table trader_setting
    owner to postgres;

create table trading_task
(
    id                  bigserial
        primary key,
    created_at          timestamp(6) with time zone,
    created_by          varchar(255),
    deleted_at          timestamp(6) with time zone,
    updated_at          timestamp(6) with time zone,
    updated_by          varchar(255),
    assign_time         timestamp(6) with time zone,
    buy_remainingm      numeric(38, 2) default 0,
    buy_volume          numeric(38, 2) default 0,
    execute_status      varchar(255)
        constraint trading_task_execute_status_check
            check ((execute_status)::text = ANY
                   ((ARRAY ['PENDING'::character varying, 'EXECUTING'::character varying, 'TRADED'::character varying, 'FINISH'::character varying, 'TERMINATED'::character varying])::text[])),
    expire_date         timestamp(6) with time zone,
    last_trading_time   timestamp(6) with time zone,
    sell_remainingm     numeric(38, 2) default 0,
    sell_volume         numeric(38, 2) default 0,
    task_no             varchar(255),
    traded_volumem      numeric(38, 2) default 0,
    transferred_volumem numeric(38, 2) default 0,
    ym                  integer,
    assigner_id         bigint
        constraint "FK6tgsm3fr7e4hu4wnmxvsledsk"
            references general_user,
    buy_currency_id     bigint
        constraint "FKo38epdno2dym6hhrdpejxhmld"
            references currency,
    instruction_id      bigint
        constraint "FKif3lu7ynt87np11o9ya5kixvj"
            references instruction,
    parent_id           bigint
        constraint "FKkuxc8rbd9bmem6d20m7n82wb3"
            references trading_task,
    sell_currency_id    bigint
        constraint "FK33och7vqam3vskgdo10dsb0tt"
            references currency,
    trader_id           bigint
        constraint "FKqjew73xnlvyodk8ngoasc9cj2"
            references general_user
);

comment on table trading_task is '交易任务';

comment on column trading_task.created_at is '实体操作相关信息';

comment on column trading_task.created_by is '实体操作相关信息';

comment on column trading_task.deleted_at is '实体操作相关信息';

comment on column trading_task.updated_at is '实体操作相关信息';

comment on column trading_task.updated_by is '实体操作相关信息';

comment on column trading_task.assign_time is '分配时间';

comment on column trading_task.buy_remainingm is '待买量';

comment on column trading_task.buy_volume is '总买量';

comment on column trading_task.execute_status is '状态';

comment on column trading_task.expire_date is '到期日';

comment on column trading_task.last_trading_time is '最后一次交易的时间';

comment on column trading_task.sell_remainingm is '待卖量';

comment on column trading_task.sell_volume is '总卖量';

comment on column trading_task.task_no is '交易任务编号';

comment on column trading_task.traded_volumem is '已交易量（百万）';

comment on column trading_task.transferred_volumem is '已转交量（百万';

comment on column trading_task.ym is '应执行月份';

comment on column trading_task.assigner_id is '分配者';

comment on column trading_task.buy_currency_id is '买（入币种）';

comment on column trading_task.instruction_id is '套保指令编号';

comment on column trading_task.parent_id is '转交源';

comment on column trading_task.sell_currency_id is '卖（出币种）';

comment on column trading_task.trader_id is '交易员';

alter table trading_task
    owner to postgres;

create table trade_inquiry
(
    id              bigserial
        primary key,
    created_at      timestamp(6) with time zone,
    created_by      varchar(255),
    deleted_at      timestamp(6) with time zone,
    updated_at      timestamp(6) with time zone,
    updated_by      varchar(255),
    code            varchar(255),
    delivery_type   smallint
        constraint trade_inquiry_delivery_type_check
            check ((delivery_type >= 0) AND (delivery_type <= 1)),
    inquiry_status  smallint
        constraint trade_inquiry_inquiry_status_check
            check ((inquiry_status >= 0) AND (inquiry_status <= 4)),
    time_initiated  timestamp(6) with time zone,
    volume          numeric(38, 2),
    initiator_id    bigint
        constraint "FK9ua3t908y13p9ggqvucr53fmm"
            references general_user,
    trading_task_id bigint
        constraint "FKormpuemsothsip6cevwc5b9uv"
            references trading_task
);

comment on table trade_inquiry is '手动询价任务';

comment on column trade_inquiry.created_at is '实体操作相关信息';

comment on column trade_inquiry.created_by is '实体操作相关信息';

comment on column trade_inquiry.deleted_at is '实体操作相关信息';

comment on column trade_inquiry.updated_at is '实体操作相关信息';

comment on column trade_inquiry.updated_by is '实体操作相关信息';

comment on column trade_inquiry.code is '询价编号';

comment on column trade_inquiry.delivery_type is '交割方式';

comment on column trade_inquiry.inquiry_status is '任务状态';

comment on column trade_inquiry.time_initiated is '发起时间';

comment on column trade_inquiry.volume is '买量/卖量';

comment on column trade_inquiry.initiator_id is '发起人';

comment on column trade_inquiry.trading_task_id is '交易任务';

alter table trade_inquiry
    owner to postgres;

create table trade_inquiry_quote
(
    id               bigserial
        primary key,
    created_at       timestamp(6) with time zone,
    created_by       varchar(255),
    deleted_at       timestamp(6) with time zone,
    updated_at       timestamp(6) with time zone,
    updated_by       varchar(255),
    price            numeric(38, 2),
    quote_time       timestamp(6) with time zone,
    counter_party_id bigint
        constraint "FKedfkabgiwkdb7iorg38nt3ffm"
            references bank_branch,
    trade_inquiry_id bigint
        constraint "FKphu9m0186j9a8pon29y3lsy5t"
            references trade_inquiry
);

comment on table trade_inquiry_quote is '手动询价任务报价';

comment on column trade_inquiry_quote.created_at is '实体操作相关信息';

comment on column trade_inquiry_quote.created_by is '实体操作相关信息';

comment on column trade_inquiry_quote.deleted_at is '实体操作相关信息';

comment on column trade_inquiry_quote.updated_at is '实体操作相关信息';

comment on column trade_inquiry_quote.updated_by is '实体操作相关信息';

comment on column trade_inquiry_quote.price is '价格';

comment on column trade_inquiry_quote.quote_time is '报价时间';

comment on column trade_inquiry_quote.counter_party_id is '对手方';

comment on column trade_inquiry_quote.trade_inquiry_id is '手动询价任务';

alter table trade_inquiry_quote
    owner to postgres;

create table trade_inquiry_bank_branch
(
    trade_inquiry_id      bigint not null
        constraint "FK1mj5355kwhwur59xgef3ucht2"
            references trade_inquiry,
    counter_party_list_id bigint not null
        constraint "FKk79x17bujx2kq3cwn6w903f7i"
            references bank_branch
);

alter table trade_inquiry_bank_branch
    owner to postgres;

create table trade_open_order
(
    id                bigserial
        primary key,
    created_at        timestamp(6) with time zone,
    created_by        varchar(255),
    deleted_at        timestamp(6) with time zone,
    updated_at        timestamp(6) with time zone,
    updated_by        varchar(255),
    code              varchar(255),
    delivery_type     smallint
        constraint trade_open_order_delivery_type_check
            check ((delivery_type >= 0) AND (delivery_type <= 1)),
    open_order_status smallint
        constraint trade_open_order_open_order_status_check
            check ((open_order_status >= 0) AND (open_order_status <= 3)),
    time_initiated    timestamp(6) with time zone,
    volume            numeric(38, 2),
    initiator_id      bigint
        constraint "FKqhe25u6cjw3nuitrubc0dh4tu"
            references general_user,
    trading_task_id   bigint
        constraint "FKdn5eaucbrsvpke2wdgf8awwvr"
            references trading_task
);

comment on table trade_open_order is '挂单询价任务';

comment on column trade_open_order.created_at is '实体操作相关信息';

comment on column trade_open_order.created_by is '实体操作相关信息';

comment on column trade_open_order.deleted_at is '实体操作相关信息';

comment on column trade_open_order.updated_at is '实体操作相关信息';

comment on column trade_open_order.updated_by is '实体操作相关信息';

comment on column trade_open_order.code is '挂单编号';

comment on column trade_open_order.delivery_type is '交割方式';

comment on column trade_open_order.open_order_status is '挂单任务状态';

comment on column trade_open_order.time_initiated is '发起时间';

comment on column trade_open_order.volume is '买量/卖量';

comment on column trade_open_order.initiator_id is '发起人';

comment on column trade_open_order.trading_task_id is '交易任务';

alter table trade_open_order
    owner to postgres;

create table trade_open_order_quote
(
    id                  bigserial
        primary key,
    created_at          timestamp(6) with time zone,
    created_by          varchar(255),
    deleted_at          timestamp(6) with time zone,
    updated_at          timestamp(6) with time zone,
    updated_by          varchar(255),
    price               numeric(38, 2),
    quote_time          timestamp(6) with time zone,
    counter_party_id    bigint
        constraint "FKfmeuhfxgmhpkvcpd9bojcaeg5"
            references bank_branch,
    trade_open_order_id bigint
        constraint "FKfj42ofix13gf1odkx2pjdwug8"
            references trade_open_order
);

comment on table trade_open_order_quote is '挂单询价任务报价';

comment on column trade_open_order_quote.created_at is '实体操作相关信息';

comment on column trade_open_order_quote.created_by is '实体操作相关信息';

comment on column trade_open_order_quote.deleted_at is '实体操作相关信息';

comment on column trade_open_order_quote.updated_at is '实体操作相关信息';

comment on column trade_open_order_quote.updated_by is '实体操作相关信息';

comment on column trade_open_order_quote.price is '价格';

comment on column trade_open_order_quote.quote_time is '报价时间';

comment on column trade_open_order_quote.counter_party_id is '对手方';

comment on column trade_open_order_quote.trade_open_order_id is '挂单询价任务';

alter table trade_open_order_quote
    owner to postgres;

create table trade_open_order_bank_branch
(
    trade_open_order_id   bigint not null
        constraint "FK4vkpkclegkbm7e4977gd0v8dv"
            references trade_open_order,
    counter_party_list_id bigint not null
        constraint "FK98pe71dlnky4l3pqqc5ppq3np"
            references bank_branch
);

alter table trade_open_order_bank_branch
    owner to postgres;

create table trade_order
(
    id                    bigserial
        primary key,
    created_at            timestamp(6) with time zone,
    created_by            varchar(255),
    deleted_at            timestamp(6) with time zone,
    updated_at            timestamp(6) with time zone,
    updated_by            varchar(255),
    source_id             bigint,
    source_type           smallint
        constraint trade_order_source_type_check
            check ((source_type >= 0) AND (source_type <= 2)),
    status                smallint
        constraint trade_order_status_check
            check ((status >= 0) AND (status <= 3)),
    counter_party_id      bigint
        constraint "FKsamy6n85w1kqfhaq0ljfxv4bw"
            references bank_branch,
    prev_id               bigint
        constraint "FK4bjpl057ltf8n9g4bhlajo616"
            references trade_order,
    trade_confirmation_id bigint
        constraint "FKbxkpnkg55brd7uw6nbsn8jgdp"
            references trade_confirmation,
    trading_task_id       bigint
        constraint "FK3psxxq3uumc0wufe2fg2bo0n1"
            references trading_task
);

comment on table trade_order is '交易单';

comment on column trade_order.created_at is '实体操作相关信息';

comment on column trade_order.created_by is '实体操作相关信息';

comment on column trade_order.deleted_at is '实体操作相关信息';

comment on column trade_order.updated_at is '实体操作相关信息';

comment on column trade_order.updated_by is '实体操作相关信息';

comment on column trade_order.source_id is '来源id';

comment on column trade_order.source_type is '来源';

comment on column trade_order.status is '状态';

comment on column trade_order.counter_party_id is '对手方';

comment on column trade_order.prev_id is '上一版本';

comment on column trade_order.trade_confirmation_id is '成交确认';

comment on column trade_order.trading_task_id is '交易任务';

alter table trade_order
    owner to postgres;

alter table trade_confirmation
    add constraint "FKqou7v0eyu3nw00wtxtrk8mw8p"
        foreign key (trade_order_id) references trade_order;

create table trade_delivery_entry
(
    id             bigserial
        primary key,
    created_at     timestamp(6) with time zone,
    created_by     varchar(255),
    deleted_at     timestamp(6) with time zone,
    updated_at     timestamp(6) with time zone,
    updated_by     varchar(255),
    trade_order_id bigint
        constraint "FKsn1aeh1d176ifg6fgfb6vhv20"
            references trade_order
);

comment on table trade_delivery_entry is '交割台账';

comment on column trade_delivery_entry.created_at is '实体操作相关信息';

comment on column trade_delivery_entry.created_by is '实体操作相关信息';

comment on column trade_delivery_entry.deleted_at is '实体操作相关信息';

comment on column trade_delivery_entry.updated_at is '实体操作相关信息';

comment on column trade_delivery_entry.updated_by is '实体操作相关信息';

comment on column trade_delivery_entry.trade_order_id is '交易单';

alter table trade_delivery_entry
    owner to postgres;

create table trade_delivery_entry_virtual
(
    id             bigserial
        primary key,
    created_at     timestamp(6) with time zone,
    created_by     varchar(255),
    deleted_at     timestamp(6) with time zone,
    updated_at     timestamp(6) with time zone,
    updated_by     varchar(255),
    trade_order_id bigint
        constraint "FKor443qovjq166je2n87llp8pn"
            references trade_order
);

comment on table trade_delivery_entry_virtual is '虚拟交割台账';

comment on column trade_delivery_entry_virtual.created_at is '实体操作相关信息';

comment on column trade_delivery_entry_virtual.created_by is '实体操作相关信息';

comment on column trade_delivery_entry_virtual.deleted_at is '实体操作相关信息';

comment on column trade_delivery_entry_virtual.updated_at is '实体操作相关信息';

comment on column trade_delivery_entry_virtual.updated_by is '实体操作相关信息';

comment on column trade_delivery_entry_virtual.trade_order_id is '交易单';

alter table trade_delivery_entry_virtual
    owner to postgres;

create table trade_entry
(
    id             bigserial
        primary key,
    created_at     timestamp(6) with time zone,
    created_by     varchar(255),
    deleted_at     timestamp(6) with time zone,
    updated_at     timestamp(6) with time zone,
    updated_by     varchar(255),
    trade_order_id bigint
        constraint "FKexdqsw2t5yk5lnf9gyd8rgxgm"
            references trade_order
);

comment on table trade_entry is '交易台账';

comment on column trade_entry.created_at is '实体操作相关信息';

comment on column trade_entry.created_by is '实体操作相关信息';

comment on column trade_entry.deleted_at is '实体操作相关信息';

comment on column trade_entry.updated_at is '实体操作相关信息';

comment on column trade_entry.updated_by is '实体操作相关信息';

comment on column trade_entry.trade_order_id is '交易单';

alter table trade_entry
    owner to postgres;

create table trade_entry_virtual
(
    id             bigserial
        primary key,
    created_at     timestamp(6) with time zone,
    created_by     varchar(255),
    deleted_at     timestamp(6) with time zone,
    updated_at     timestamp(6) with time zone,
    updated_by     varchar(255),
    trade_order_id bigint
        constraint "FKhsuwync99qcy1gkx74fggn1ag"
            references trade_order
);

comment on table trade_entry_virtual is '虚拟交易台账';

comment on column trade_entry_virtual.created_at is '实体操作相关信息';

comment on column trade_entry_virtual.created_by is '实体操作相关信息';

comment on column trade_entry_virtual.deleted_at is '实体操作相关信息';

comment on column trade_entry_virtual.updated_at is '实体操作相关信息';

comment on column trade_entry_virtual.updated_by is '实体操作相关信息';

comment on column trade_entry_virtual.trade_order_id is '交易单';

alter table trade_entry_virtual
    owner to postgres;

